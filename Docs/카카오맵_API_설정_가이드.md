# 카카오맵 API 설정 가이드

## 401 Unauthorized 오류 해결 방법

**⚠️ 중요: 401 오류는 API 키 인증 실패를 의미합니다.**

가능한 원인:
1. **도메인 미등록** (가장 흔한 원인)
2. **API 키 오류**
3. **카카오맵 API 미활성화**
4. **애플리케이션 상태 문제**

### 1. 카카오 개발자 콘솔 확인

1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. 로그인 후 애플리케이션 선택

### 2. 플랫폼 설정

**앱 설정 → 플랫폼** 메뉴에서:

1. **Web 플랫폼 추가** 클릭
2. **사이트 도메인**에 다음을 등록:
   
   **로컬 개발 환경:**
   ```
   http://localhost:3000
   ```
   
   **배포 환경 (Cloudtype 등):**
   ```
   https://your-deployment-domain.com
   ```
   - 배포된 실제 도메인을 정확히 입력
   - `https://` 또는 `http://` 프로토콜 포함
   - 포트 번호가 있다면 포함 (일반적으로 배포 환경은 포트 없음)
   - 마지막에 `/` 없이 입력
   - 예: `https://port-0-sample-project-task1-frontend-xxx.sel3.cloudtype.app`

3. **여러 도메인 등록:**
   - 로컬 개발과 배포 환경을 모두 사용하는 경우, 각각 별도로 등록
   - 또는 와일드카드 사용: `*.cloudtype.app` (가능한 경우)

4. **저장** 클릭

### 3. JavaScript 키 확인

**앱 키** 메뉴에서:

1. **JavaScript 키** 확인
2. 현재 사용 중인 키: `b52a3c45d39c3a6d3bc718200bfe88f6`
3. 키가 다르다면 `AppConfig.ts` 파일의 키를 업데이트

### 4. 애플리케이션 상태 확인

**앱 설정 → 일반** 메뉴에서:

- **앱 상태**가 **서비스 중**인지 확인
- **서비스 중**이 아니면 **서비스 중**으로 변경

### 5. 카카오맵 API 활성화 확인

**제품 설정 → 카카오맵** 메뉴에서:

1. **카카오맵 API** 활성화 확인
2. 활성화되어 있지 않다면 **활성화** 버튼 클릭
3. **저장** 클릭

### 6. JavaScript 키 확인 (중요)

**앱 키** 메뉴에서:

1. **JavaScript 키** 확인
2. 현재 프로젝트에서 사용 중인 키: `b52a3c45d39c3a6d3bc718200bfe88f6`
3. 키가 다르다면:
   - `src/shared/constants/AppConfig.ts` 파일 열기
   - `KAKAO_MAP_API_KEY` 값을 카카오 개발자 콘솔의 JavaScript 키로 변경
   - 저장 후 개발 서버 재시작

## 주의사항

- 도메인 등록 후 **즉시 반영**되지 않을 수 있습니다 (몇 분 소요)
- 도메인 등록 후 브라우저를 완전히 종료하고 다시 시작하세요
- 개발 서버도 재시작하세요

## 테스트

도메인 등록 후:

1. 브라우저 완전 종료 후 재시작
2. 개발 서버 재시작
3. `http://localhost:3000` 접속
4. 브라우저 개발자 도구(F12) → Network 탭에서 `sdk.js` 파일 확인
5. 상태 코드가 **200**이면 성공

## 403 Forbidden 오류 해결 방법

403 오류는 **도메인 미등록** 또는 **API 키 오류**일 가능성이 높습니다.

### 확인 사항

1. **현재 접속 중인 도메인 확인:**
   - 브라우저 주소창의 전체 URL 확인
   - 예: `https://port-0-sample-project-task1-frontend-xxx.sel3.cloudtype.app`

2. **카카오 개발자 콘솔에서 도메인 등록 확인:**
   - 앱 설정 → 플랫폼 → Web 플랫폼
   - 현재 접속 중인 도메인이 정확히 등록되어 있는지 확인
   - 프로토콜(`https://` 또는 `http://`)까지 정확히 일치해야 함

3. **도메인 등록 예시:**
   ```
   로컬: http://localhost:3000
   배포: https://your-actual-domain.com
   ```

4. **도메인 등록 후:**
   - 몇 분(최대 10분) 대기
   - 브라우저 캐시 삭제 (Ctrl+Shift+Delete)
   - 브라우저 완전 종료 후 재시작
   - 배포 환경의 경우 재배포

## 401 Unauthorized 오류 체크리스트

다음 항목을 순서대로 확인하세요:

### 1단계: 도메인 등록 확인
- [ ] 카카오 개발자 콘솔 접속: https://developers.kakao.com/
- [ ] 내 애플리케이션 선택
- [ ] **앱 설정 → 플랫폼** 메뉴로 이동
- [ ] **Web 플랫폼**이 추가되어 있는가?
- [ ] **사이트 도메인**에 현재 접속 중인 도메인이 정확히 등록되어 있는가?
  - 로컬 개발: `http://localhost:3000` (포트 번호 포함)
  - 배포 환경: `https://your-actual-domain.com` (실제 배포 도메인)
- [ ] 프로토콜(`http://` 또는 `https://`)이 정확히 일치하는가?
- [ ] 마지막에 `/` 없이 입력되어 있는가?

### 2단계: API 키 확인
- [ ] **앱 키** 메뉴에서 **JavaScript 키** 확인
- [ ] JavaScript 키가 `b52a3c45d39c3a6d3bc718200bfe88f6`와 일치하는가?
- [ ] 키가 다르다면 `src/shared/constants/AppConfig.ts` 파일 수정

### 3단계: API 활성화 확인
- [ ] **제품 설정 → 카카오맵** 메뉴로 이동
- [ ] 카카오맵 API가 **활성화**되어 있는가?
- [ ] 활성화되어 있지 않다면 **활성화** 버튼 클릭

### 4단계: 애플리케이션 상태 확인
- [ ] **앱 설정 → 일반** 메뉴로 이동
- [ ] **앱 상태**가 **서비스 중**인가?
- [ ] **서비스 중**이 아니면 **서비스 중**으로 변경

### 5단계: 적용 및 테스트
- [ ] 모든 설정 변경 후 **저장** 클릭
- [ ] **10분 이상 대기** (도메인 등록 반영 시간)
- [ ] 브라우저 캐시 삭제 (Ctrl+Shift+Delete)
- [ ] 브라우저 완전 종료 후 재시작
- [ ] 개발 서버 재시작 (로컬 개발 시)
- [ ] 배포 환경의 경우 재배포
- [ ] 브라우저 개발자 도구(F12) → Network 탭에서 `sdk.js` 파일 확인
- [ ] 상태 코드가 **200**이면 성공

## 문제 해결 체크리스트 (요약)

- [ ] Web 플랫폼이 추가되어 있는가?
- [ ] 사이트 도메인이 현재 접속 중인 도메인과 정확히 일치하는가?
- [ ] 프로토콜(`http://` 또는 `https://`)이 일치하는가?
- [ ] JavaScript 키가 올바른가? (`b52a3c45d39c3a6d3bc718200bfe88f6`)
- [ ] 카카오맵 API가 활성화되어 있는가?
- [ ] 애플리케이션 상태가 "서비스 중"인가?
- [ ] 도메인 등록 후 10분 이상 기다렸는가?
- [ ] 브라우저 캐시를 삭제하고 완전히 종료 후 재시작했는가?
- [ ] 배포 환경의 경우 재배포를 시도했는가?

